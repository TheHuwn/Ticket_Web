(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{365:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets/new",function(){return n(45)}])},7057:function(e,t,n){"use strict";var s=n(5893),r=n(1737),a=n(2401),i=n(6154),c=n(7294);t.Z=e=>{let{method:t,url:n,body:l,onSuccess:o}=e,[u,d]=(0,c.useState)(null),p=async()=>{d(null);try{let e=await i.Z[t](n,l);return o&&o(e.data),e.data}catch(e){d((0,s.jsxs)(r.Z,{severity:"error",sx:{margin:"15px 0px"},children:[(0,s.jsx)(a.Z,{children:"Ooopps..."}),(0,s.jsx)("ul",{className:"my-0",children:e.response.data.errors.map(e=>(0,s.jsx)("li",{children:e.message},e.message))})]}))}};return{doRequest:p,errors:u}}},45:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=n(5582),a=n(5861),i=n(492),c=n(9417),l=n(7294),o=n(7057),u=n(5363),d=n(1649),p=n(1163),m=n.n(p);t.default=e=>{let{currentUser:t}=e,[n,p]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),g=(0,d.I0)(),{errors:f,doRequest:j}=(0,o.Z)({method:"post",url:"/api/tickets",body:{title:n,price:x},onSuccess:async e=>{console.log("API response on success:",e),e&&e.ticket&&e.ticket.id&&m().push("/tickets/".concat(e.ticket.id)),g((0,u.Sm)({severity:"success",message:"ticket created successfully"})),g((0,u.jY)(!0)),setTimeout(()=>{g((0,u.jY)(!1))},3e3)}}),k=async e=>{e.preventDefault();try{await j()}catch(e){console.log("API error response:",e)}};return(0,s.jsxs)(r.Z,{children:[(0,s.jsx)(a.Z,{variant:"h4",textAlign:"center",marginTop:"50px",color:"#1976d2",under:!0,sx:{textDecoration:"underline"},children:"Create a Ticket"}),(0,s.jsxs)("form",{style:{maxWidth:"500px",margin:"auto"},children:[(0,s.jsx)(i.Z,{value:n,onChange:e=>p(e.target.value),fullWidth:!0,margin:"normal",label:"Title",id:"form3",type:"text"}),(0,s.jsx)(i.Z,{value:x,onBlur:()=>{let e=parseFloat(x);isNaN(e)||h(e.toFixed(2))},onChange:e=>h(e.target.value),fullWidth:!0,margin:"normal",label:"Price",id:"form4",type:"number"}),(0,s.jsx)(c.Z,{onClick:k,variant:"contained",fullWidth:!0,sx:{marginTop:"20px"},children:"Create"}),(0,s.jsx)(a.Z,{component:"div",width:"100%",marginBottom:"10px",marginTop:"50px",children:f})]})]})}}},function(e){e.O(0,[202,774,888,179],function(){return e(e.s=365)}),_N_E=e.O()}]);