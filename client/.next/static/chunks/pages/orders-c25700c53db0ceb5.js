(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{1733:function(e,t,s){"use strict";var n=s(4836);t.Z=void 0;var r=n(s(4938)),i=s(5893),c=(0,r.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=c},2393:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders",function(){return s(3510)}])},7057:function(e,t,s){"use strict";var n=s(5893),r=s(1737),i=s(2401),c=s(6154),l=s(7294);t.Z=e=>{let{method:t,url:s,body:a,onSuccess:o}=e,[d,u]=(0,l.useState)(null),h=async()=>{u(null);try{let e=await c.Z[t](s,a);return o&&o(e.data),e.data}catch(e){u((0,n.jsxs)(r.Z,{severity:"error",sx:{margin:"15px 0px"},children:[(0,n.jsx)(i.Z,{children:"Ooopps..."}),(0,n.jsx)("ul",{className:"my-0",children:e.response.data.errors.map(e=>(0,n.jsx)("li",{children:e.message},e.message))})]}))}};return{doRequest:h,errors:d}}},3510:function(e,t,s){"use strict";s.r(t);var n=s(5893),r=s(7294),i=s(2882),c=s(629),l=s(7906),a=s(3184),o=s(3816),d=s(3252),u=s(295),h=s(3946),x=s(657),j=s(7645),Z=s(6580),p=s(5861),g=s(1425),f=s(9417),m=s(5582),k=s(1163),v=s.n(k),C=s(1733),_=s(7057),w=s(1649),y=s(5363);let S=e=>{let{orders:t}=e,s=(0,w.I0)(),[m,k]=r.useState(!1),[S,N]=r.useState(""),[E,O]=r.useState(!1),{errors:T,doRequest:b}=(0,_.Z)({method:"delete",url:"/api/orders/".concat(S),onSuccess:async()=>{O(!0),s((0,y.Sm)({severity:"success",message:"order deleted successfully"})),s((0,y.jY)(!0)),setTimeout(()=>{s((0,y.jY)(!1))},3e3)}}),D=async()=>{await b()};return(0,n.jsxs)(i.Z,{component:c.Z,sx:{width:"600px",margin:"auto"},children:[(0,n.jsxs)(l.Z,{sx:{backgroundColor:"aliceblue"},children:[(0,n.jsx)(a.Z,{children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(d.Z,{align:"center",sx:{fontWeight:"700"},children:"Title"}),(0,n.jsx)(d.Z,{align:"center",sx:{fontWeight:"700"},children:"Status"}),(0,n.jsx)(d.Z,{align:"center",sx:{fontWeight:"700"},children:"Actions"})]})}),(0,n.jsx)(u.Z,{children:t&&t.map((e,t)=>(0,n.jsxs)(o.Z,{sx:{cursor:"pointer"},children:[(0,n.jsx)(d.Z,{align:"center",onClick:()=>{E||"Cancelled"===e.status||v().push("https://ticketing.dev/orders/".concat(e.id))},children:e.ticket.title}),(0,n.jsx)(d.Z,{align:"center",onClick:()=>{E||"Cancelled"===e.status||v().push("https://ticketing.dev/orders/".concat(e.id))},children:E?"Cancelled":e.status}),(0,n.jsx)(d.Z,{align:"center",children:(0,n.jsx)(h.Z,{onClick:()=>{N(e.id),k(!0)},color:"#ff4545",children:(0,n.jsx)(C.Z,{color:"#ff4545 !important"})})})]},t))})]}),(0,n.jsxs)(x.Z,{open:m,onClose:()=>k(!1),children:[(0,n.jsx)(j.Z,{className:"dialog-title",children:"Delete Order"}),(0,n.jsx)(Z.Z,{children:(0,n.jsx)(p.Z,{children:"Sure to delete this order"})}),(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(f.Z,{onClick:()=>D(S),variant:"contained",children:"Delete"}),(0,n.jsx)(f.Z,{onClick:()=>k(!1),children:"close"})]})]}),T]})},N=e=>{let{orders:t}=e;return(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(p.Z,{variant:"h4",textAlign:"center",marginTop:"50px",color:"#1976d2",marginBottom:"50px",sx:{textDecoration:"underline"},children:"My Orders"}),(0,n.jsx)(S,{orders:t})]})};N.getInitialProps=async(e,t)=>{let{data:s}=await t.get("/api/orders");return{orders:s.orders}},t.default=N}},function(e){e.O(0,[181,792,774,888,179],function(){return e(e.s=2393)}),_N_E=e.O()}]);